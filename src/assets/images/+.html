<!DOCTYPE html>
<!-- saved from url=(0017)http://localhost/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Examples</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link href="http://localhost/" rel="stylesheet">
    <script src="./+_files/jquery.min.js.下载"></script>
    <script src="./+_files/handlebars.min.js.下载"></script>
</head>

<body style="">
    <button id="newdb">链接数据库</button>
    <script type="text/template" id="myTemplate">
        <div class="demo">
            <h1>{{code}}</h1>
            <p>{{msg}}</p>
        </div>
    </script>
    <input type="text" name="firstname">
    <input type="text" name="lastname">
    <input type="text" name="age">
    <button id="add">添加数据</button>
    
        <div class="demo">
            <h1>0</h1>
            <p>添加成功</p>
        </div>
    
        <div class="demo">
            <h1>0</h1>
            <p>添加成功</p>
        </div>
    <script type="text/template" id="myTemplate2">
        <div class="demo">
            <h1>{{code}}</h1>
            <p>{{msg}}</p>
        </div>
    </script>

    <button id="get">查询数据</button>
    
        <div class="demo">
            <h1>0</h1>
            <p>成功</p>
            <ul>
            	<li>FirstName:tom,LastName:tony</li>
            	<li>FirstName:lh,LastName:h</li>
            	<li>FirstName:jy,LastName:j</li>
            	<li>FirstName:tom,LastName:tony</li>
            	<li>FirstName:lh,LastName:h</li>
            	<li>FirstName:jy,LastName:j</li>
            	<li>FirstName:tom,LastName:tony</li>
            	<li>FirstName:lh,LastName:h</li>
            	<li>FirstName:jy,LastName:j</li>
            	<li>FirstName:.asd.,LastName:.asdasdasd.</li>
            	<li>FirstName:.阿萨德阿萨德.,LastName:.阿萨德阿萨德.</li>
            	<li>FirstName:..,LastName:..</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            </ul>
        </div>
    
        <div class="demo">
            <h1>0</h1>
            <p>成功</p>
            <ul>
            	<li>FirstName:tom,LastName:tony</li>
            	<li>FirstName:lh,LastName:h</li>
            	<li>FirstName:jy,LastName:j</li>
            	<li>FirstName:tom,LastName:tony</li>
            	<li>FirstName:lh,LastName:h</li>
            	<li>FirstName:jy,LastName:j</li>
            	<li>FirstName:tom,LastName:tony</li>
            	<li>FirstName:lh,LastName:h</li>
            	<li>FirstName:jy,LastName:j</li>
            	<li>FirstName:.asd.,LastName:.asdasdasd.</li>
            	<li>FirstName:.阿萨德阿萨德.,LastName:.阿萨德阿萨德.</li>
            	<li>FirstName:..,LastName:..</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:. 阿萨德.,LastName:.阿萨德撒的.</li>
            	<li>FirstName:.阿萨德撒的.,LastName:.231123213.</li>
            	<li>FirstName:.阿萨德撒的.,LastName:.231123213.</li>
            </ul>
        </div>
    <script type="text/template" id="myTemplate3">
        <div class="demo">
            <h1>{{code}}</h1>
            <p>{{msg}}</p>
            <ul>
            {{#each data}}
            	<li>FirstName:{{FirstName}},LastName:{{LastName}}</li>
            {{/each}}
            </ul>
        </div>
    </script>
    <script>
    $('#newdb').click(function() {
        $.ajax({
                url: 'newdb.php',
                type: 'get',
                dataType: 'json'
            })
            .done(function(res) {
                console.log(res);
                   //用jquery获取模板
				    var tpl   =  $("#myTemplate");
				    //预编译模板
				    var template = Handlebars.compile(tpl.html());
				    //匹配json内容
				    var html = template(res);
				    //输入模板
				    tpl.before(html);
            })
            .fail(function() {
                console.log("error");
            })
            .always(function() {
                console.log("complete");
            });

    });

    $('#add').click(function() {
    	var firstname = $('[name="firstname"]').val();
    	var lastname = $('[name="lastname"]').val();
    	var age = $('[name="age"]').val();
        $.ajax({
                url: 'add.php',
                type: 'post',
                dataType: 'json',
                data:{
                	"firstname":firstname,
                	"lastname":lastname,
                	"age":age
                }
            })
            .done(function(res) {
                console.log(res);
                   //用jquery获取模板
				    var tpl   =  $("#myTemplate2");
				    //预编译模板
				    var template = Handlebars.compile(tpl.html());
				    //匹配json内容
				    var html = template(res);
				    //输入模板
				    tpl.before(html);
            })
            .fail(function() {
                console.log("error");
            })
            .always(function() {
                console.log("complete");
            });

    });

    $('#get').click(function() {
        $.ajax({
                url: 'get.php',
                type: 'get',
                dataType: 'json'
            })
            .done(function(res) {
                console.log(res);
                   //用jquery获取模板
				    var tpl   =  $("#myTemplate3");
				    //预编译模板
				    var template = Handlebars.compile(tpl.html());
				    //匹配json内容
				    var html = template(res);
				    //输入模板
				    tpl.before(html);
            })
            .fail(function() {
                console.log("error");
            })
            .always(function() {
                console.log("complete");
            });

    })
    </script>



</body></html>